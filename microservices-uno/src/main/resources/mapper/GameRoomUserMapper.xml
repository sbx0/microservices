<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.sbx0.microservices.uno.mapper.GameRoomUserMapper">

    <select id="alreadyJoinByCreateUserId" resultType="cn.sbx0.microservices.uno.entity.GameRoomUserEntity">
        select id,
               room_id,
               user_id,
               username,
               remark,
               del_flag,
               create_user_id,
               create_time,
               update_user_id,
               update_time
        from game_room_user
        where user_id = #{id}
          and del_flag = 0
        order by update_time desc, create_time desc
        limit 1
    </select>
    <select id="listByGameRoom" resultType="cn.sbx0.microservices.uno.entity.GameRoomUserEntity">
        select any_value(id)             as id,
               any_value(room_id)        as room_id,
               user_id,
               any_value(username)       as username,
               any_value(remark)         as remark,
               del_flag,
               any_value(create_user_id) as create_user_id,
               create_time,
               any_value(update_user_id) as update_user_id,
               update_time
        from game_room_user
        where room_id = #{id}
          and del_flag = 0
        group by user_id, update_time, create_time
        order by update_time desc, create_time desc
        limit #{size}
    </select>
</mapper>
